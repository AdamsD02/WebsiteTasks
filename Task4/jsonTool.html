<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Validator</title>

    <style>
        textarea {
            resize: none;
            border: none;
        }
        div {
            min-height: 20px;
            width: fit-content;
            background-color: rgb(160, 207, 191);
            padding: 10px;
            padding-top: 30px;
        }
        #op {
            width: 500px;
            content: "";
        }
        i {
            color: rgb(213, 255, 241);
        }
    </style>
</head>

<body>
    <h1>JSON Validator</h1>
    <div>
        <textarea class="input" id="input" rows="30" cols="45" 
        oninput="parseCheck()" >There is something here</textarea>
        <!-- <label for="" ></label> -->
        <textarea class="output" id="output" rows="20" cols="45" ></textarea>
    </div>
    <br>
    <button id="saas" type="button" onclick="parseCheck()" >copy below</button>

    <script>
        function treeForm(input) {
            input = input.replace(/\s/g, '') ;
            let tree = "" ;
            const arr = input.split('');
            let len = arr.length ;
            let i = 0 , level =0;
            let output = document.getElementById("output") ;

            for( i =0 ; i < len ; i++ ) {
                if( checker(arr[i]) == 1 ) {
                    level++ ;
                    tree += arr[i] + "\n" ;
                    for( let j=0; j < level ; j++ ) {
                        tree += "  " ;
                    };
                }
                else if( checker(arr[i]) == 2 ) {
                    level-- ;
                    tree += "\n" ;
                    for( let j=0; j < level ; j++ ) {
                        tree += "  " ;
                    }
                    tree += arr[i] ;
                }
                else if(arr[i] == ',' ) {
                    tree += "\n" ;
                    for( let j=0; j < level ; j++ ) {
                        tree += "  " ;
                    }
                }
                else {
                    tree += arr[i] ; 
                }
                
            }
            output.value += "\n\n" + tree ;
        }

        function parseCheck() {
            let input = document.getElementById("input").value ;
            let output = document.getElementById("output") ;
            let v1;
            output.style.display = 'block' ;
            output.style.color = "green" ;
            output.style.backgroundColor = 'rgb(213, 255, 241)' ;
            output.value = "successful." + "\n ";
            try {
                v1 = JSON.parse(input) ;
            }
            catch(e) {
                output.style.color="red" ;
                output.style.backgroundColor = 'rgb(255, 207, 207)' ;
                output.value = "Error found: " + e.message ;
                return;
            }
            treeForm(input);
        }

        class arr {
            constructor() {
                this.item = [] ;
            }
            addItem(element) {
                return this.item.push(element) ;
            }
            clear() {
                this.item = [] ;
            }
        }
        const stack = new arr() ;

        function checker(item) {
            if( item == '{' || item =='[' ) {
                return 1;
            }
            else if( item == '}' || item ==']' ) {
                return 2 ;
            }
            else {
                return 0 ;
            }
        }

    </script>
</body>
</html>